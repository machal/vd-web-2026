---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const podcasts = await getCollection('podcast', (entry) => {
  // Filtrovat jen publikované podcasty
  return entry.data.published !== false;
});
const sortedPodcasts = podcasts.sort((a, b) => {
  const dateA = a.data.date || new Date(0);
  const dateB = b.data.date || new Date(0);
  return dateB.getTime() - dateA.getTime();
});

// Stránkování - 10 položek na stránku
const postsPerPage = 10;
const totalPages = Math.ceil(sortedPodcasts.length / postsPerPage);
const currentPage = 1;

const latestPodcast = sortedPodcasts[0];
// Na první stránce zobrazit 19 dalších (celkem 20 s latestPodcast)
const otherPodcasts = sortedPodcasts.slice(1, postsPerPage);

function formatDate(date: Date): string {
  return new Intl.DateTimeFormat('cs-CZ', {
    day: 'numeric',
    month: 'numeric',
    year: 'numeric',
  }).format(date);
}
---

<BaseLayout
  title="Podcast – archiv Vzhůru dolů a FrontKec"
  description="Archiv podcastu ze Vzhůru dolů (všechny epizody, už nevysílá). Martin Michálek a Robin Pokorný pokračují v podcastu FrontKec pod Frontendisti.cz."
  bodyClass="section-podcast"
>
  <Header slot="header" />
  <Footer slot="footer" />

  <main role="main" id="main" aria-label="Hlavní obsah">
      <div class="page-head page-head--lower mb-0">
        <h1>Podcast ze Vzhůru dolů</h1>
        <div class="mb-0 maxw-30em">
          <p>
            Podcast ze Vzhůru dolů už nevysílá, změnil se na <a href="https://www.frontendisti.cz/frontkec">FrontKec</a>. Zde ale najdete všechny původní epizody na jednom místě.
          </p>
          <p>
            <a href="https://open.spotify.com/show/1G2kH2YrIwD9BABg4L7xGC">Spotify</a> – <a href="https://itunes.apple.com/cz/podcast/vzhuru-dolu-podcast/id1176274658">Apple Podcasts</a> – <a href="https://tunein.com/podcasts/Technology-News/Vzhuru-dolu-podcast-p1177693/">TuneIn</a> – <a href="https://anchor.fm/s/82312eb4/podcast/rss">RSS</a>
          </p>
        </div>
      </div>

      <div class="section frontkec-box pt-0 mt-0" id="frontkec">
        <div class="content ta-c maxw-30em pt-2 pb-2">
          <h2 class="section-heading heading-anchored mb-05">
            <a href="#frontkec">Přelaďte na FrontKec</a>
          </h2>
          <p>
            Podcast od frontendistů pro frontendisty, od webařů pro webaře. Martin Michálek a Robin Pokorný mluví s lidmi, kteří mají zkušenosti, znalosti a dělají weby srdcem. FrontKec navazuje na podcast Vzhůru dolů.
          </p>
          <p>
            <a href="https://open.spotify.com/show/1Eo2sxfbDhiOTnRXDbsBYT">Spotify</a> – <a href="https://www.youtube.com/playlist?list=PLnXfazh66kVc9pbw_Tnw36M5VUIp3_pGQ">YouTube</a> – <a href="https://podcasts.apple.com/us/podcast/frontkec-podcast/id1836574580">Apple Podcasts</a> – <a href="https://anchor.fm/s/108d0600c/podcast/rss">RSS</a>
          </p>
          <p class="mt-2">
            <a class="button" href="https://www.frontendisti.cz/frontkec">Přejít na FrontKec</a>
          </p>
        </div>
      </div>

      <div class="section">
        <div class="content maxw-40em mx-a">
        {latestPodcast && (
          <div class="mb-15 ta-c">
            <h2 class="mb-05 pb-0">
              <a href={`/podcast/${latestPodcast.data.postID}-${latestPodcast.slug}`}>{latestPodcast.data.title}</a>
            </h2>
            <p>
              <span class="article">
                <span class="text-color-lightest">
                  {formatDate(latestPodcast.data.date)}
                  —
                </span>
                {latestPodcast.data.description}
              </span>
            </p>
            <p class="mb-0 f-6">
              <a class="button" href={`/podcast/${latestPodcast.data.postID}-${latestPodcast.slug}`}>Pokračovat…</a>
            </p>
          </div>
        )}
          {otherPodcasts.length > 0 && (
            <>
              <hr class="hr--small hr--spaced" />
              {otherPodcasts.map((podcast) => (
                <article role="article" class="mb-15">
                  <h2 class="h4 mb-05">
                    <a href={`/podcast/${podcast.data.postID}-${podcast.slug}`}>{podcast.data.title}</a>
                  </h2>
                  <p>
                    <span class="text-color-lightest">
                      {formatDate(podcast.data.date)}
                      —
                    </span>
                    {podcast.data.description}
                  </p>
                </article>
              ))}
            </>
          )}

          {/* Navigace stránkování */}
          {totalPages > 1 && (
            <nav class="ta-c mt-3" aria-label="Stránkování">
              <span class="mx-1 f-6">
                Stránka {currentPage} z {totalPages}
              </span>
              
              <a class="button" href="/podcast/p=2">
                Další stránka →
              </a>
            </nav>
          )}
        </div>
      </div>

      <div class="content mb-3" id="autori">
        <div class="section">
          <div class="article">
            <h2 class="ta-c mb-2 mt-3">
              <a href="#autori">Hostitelé podcastu</a>
            </h2>

            <div class="row f-sm">
              <div class="col w-50-sm ta-c">
                <span class="avatar mb-0 pb-0">
                  <img src="/assets/img/content/lectors/shoulders-martin-michalek.png" alt="Martin Michálek" width="200" height="200" loading="lazy" class="avatar__image">
                </span>
                <h3 class="mt-05 mb-05 pt-0 ta-c h4">
                  Martin Michálek
                </h3>
                <p>
                  Dlouholetý webař, píše blog Vzhůru dolů a knihy o frontendu, věnuje se rychlosti webů (PageSpeed.one). Zakladatel spolku Frontendisti.cz.
                </p>
                <p class="small">
                  <a href="https://www.vzhurudolu.cz/martin" target="_blank" rel="noopener">Web</a> – <a href="https://x.com/machal" target="_blank" rel="noopener">X</a> – <a href="https://www.linkedin.com/in/machal/" target="_blank" rel="noopener">LinkedIn</a>
                </p>
              </div>

              <div class="col w-50-sm ta-c">
                <span class="avatar mb-0 pb-0">
                  <img src="/assets/img/content/lectors/shoulders-robin-pokorny.png" alt="Robin Pokorný" width="200" height="200" loading="lazy" class="avatar__image">
                </span>
                <h3 class="mt-05 mb-05 pt-0 ta-c h4">
                  Robin Pokorný
                </h3>
                <p>
                  Senior Staff Engineer, zaměřuje se na TypeScript a funkcionální programování. Od roku 2013 natáčel podcast Brus kódu, spoluzaložil spolek Frontendisti.cz.
                </p>
                <p class="small">
                  <a href="https://robinpokorny.com" target="_blank" rel="noopener">Web</a> – <a href="https://x.com/robinpokorny" target="_blank" rel="noopener">X</a> – <a href="https://www.linkedin.com/in/robinpokorny/" target="_blank" rel="noopener">LinkedIn</a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

    </main>

  <style>
    .frontkec-box {
      background: #f5f2d4;
    }
  </style>
  
  <script is:inline src="/assets/js/vrdl.min.js"></script>
</BaseLayout>
