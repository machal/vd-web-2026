---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import StyleSubnav from '../../components/StyleSubnav.astro';

// Vyloučení ze sitemapy
export const sitemap = false;

// Mapování slug → konfigurace stránky (používá se v getStaticPaths i v render části)
const stylePagesMap: Record<string, { title: string; content: string }> = {
  base: {
    title: 'Systém designu pro Vzhůru dolů: typografie',
    content: '<p>Obsah stránky o typografii bude doplněn.</p>',
  },
  colors: {
    title: 'Systém designu pro Vzhůru dolů: barvy',
    content: '<p>Obsah stránky o barvách bude doplněn.</p>',
  },
  default: {
    title: 'Systém designu pro Vzhůru dolů: default',
    content: '<p>Obsah stránky o default stylech bude doplněn.</p>',
  },
  helpers: {
    title: 'Systém designu pro Vzhůru dolů: helpery',
    content: '<p>Obsah stránky o helper třídách bude doplněn.</p>',
  },
  modules: {
    title: 'Systém designu pro Vzhůru dolů: moduly',
    content: '<p>Obsah stránky o modulech bude doplněn.</p>',
  },
};

export async function getStaticPaths() {
  // Definice přímo v getStaticPaths, protože běží v jiném kontextu
  const pages: Record<string, { title: string; content: string }> = {
    base: {
      title: 'Systém designu pro Vzhůru dolů: typografie',
      content: '<p>Obsah stránky o typografii bude doplněn.</p>',
    },
    colors: {
      title: 'Systém designu pro Vzhůru dolů: barvy',
      content: '<p>Obsah stránky o barvách bude doplněn.</p>',
    },
    default: {
      title: 'Systém designu pro Vzhůru dolů: default',
      content: '<p>Obsah stránky o default stylech bude doplněn.</p>',
    },
    helpers: {
      title: 'Systém designu pro Vzhůru dolů: helpery',
      content: '<p>Obsah stránky o helper třídách bude doplněn.</p>',
    },
    modules: {
      title: 'Systém designu pro Vzhůru dolů: moduly',
      content: '<p>Obsah stránky o modulech bude doplněn.</p>',
    },
  };
  
  return Object.keys(pages).map((slug) => ({
    params: { slug },
  }));
}

const { slug } = Astro.params;

if (!slug || !stylePagesMap[slug]) {
  return Astro.redirect('/404');
}

const styleConfig = stylePagesMap[slug];
const pageTitle = styleConfig.title;
const articleContent = styleConfig.content;
---

<BaseLayout
  title={pageTitle}
  description={`${pageTitle} – dokumentace design systému webu Vzhůru dolů`}
  bodyClass="section-style"
>
  <Header slot="header" />
  <Footer slot="footer" />

  <div class="page-head">
    <h1>{pageTitle}</h1>
  </div>

  <main role="main" id="main" aria-label="Hlavní obsah">
    <div class="content">
      <StyleSubnav activeSlug={slug} />
    </div>

    <div class="content">
      <div class="article" set:html={articleContent} />
    </div>
  </main>
</BaseLayout>
