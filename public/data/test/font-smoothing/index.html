<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
  "http://www.w3.org/TR/html4/strict.dtd">

<html>

  <head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="content-language" content="cs">
    <meta http-equiv="imagetoolbar" content="no">
    <meta http-equiv="Content-Style-Type" content="text/css">
    <meta http-equiv="Content-Script-Type" content="text/javascript">
  
    <title>Font-smoothing detect with @font-face</title>
  
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
    
    <script type="text/javascript">
    
       $(document).ready(function() { 
         TypeHelpers.insertClasses(); 
       });
      
        var TypeHelpers = new function(){
    
           // I use me instead of this.  For reasons why, please read:
           // http://w3future.com/html/stories/callbacks.xml
           var me = this;
    
           me.hasSmoothing = function(){
    
              // IE has screen.fontSmoothingEnabled - sweet!
              if (typeof(screen.fontSmoothingEnabled) != "undefined") {
                 // IE7+ has fontSmoothing enabled by default no matter system settings
                 if (window.XMLHttpRequest) {
                   return true;
                 // IE6-
                 } else {
                   return screen.fontSmoothingEnabled;
                 }
              } else {
    
                 try {
    
                    // Create a 35x35 Canvas block.
                    var canvasNode = document.createElement('canvas');
                    canvasNode.width = "35";
                    canvasNode.height = "35"
    
                    // We must put this node into the body, otherwise
                    // Safari Windows does not report correctly.
                    canvasNode.style.display = 'none';
                    document.body.appendChild(canvasNode);
                    var ctx = canvasNode.getContext('2d');
    
                    // draw a black letter 'O', 32px Arial.
                    ctx.textBaseline = "top";
                    ctx.font = "32px Arial";
                    ctx.fillStyle = "black";
                    ctx.strokeStyle = "black";
    
                    ctx.fillText("O", 0, 0);
    
                    // start at (8,1) and search the canvas from left to right,
                    // top to bottom to see if we can find a non-black pixel.  If
                    // so we return true.
                    for (var j = 8; j <= 32; j++) {
                       for (var i = 1; i <= 32; i++) {
    
                          var imageData = ctx.getImageData(i, j, 1, 1).data;
                          var alpha = imageData[3];
    
                          if (alpha != 255 && alpha != 0) {
                             return true; // font-smoothing must be on.
                          }
                       }
    
                    }
    
                    // didn't find any non-black pixels - return false.
                    return false;
                 }
                 catch (ex) {
                    // Something went wrong (for example, Opera cannot use the
                    // canvas fillText() method.  Return null (unknown).
                    return null;
                 }
              }
           }
    
           me.insertClasses = function(){
              var result = me.hasSmoothing();
              var htmlNode = document.getElementsByTagName('html')[0];
              if (result == true) {
                 htmlNode.className += " hasFontSmoothing-true";
              } else if (result == false) {
                    htmlNode.className += " hasFontSmoothing-false";
              } else { // result == null
                    htmlNode.className += " hasFontSmoothing-unknown";
              }
           }
    
        }
        

    </script>
    
    <style type="text/css" media="screen">
    
    body {
      font: 12px/18px sans-serif;
      color: #333;
      background-color: #fff;
      padding: 50px;
      margin: 0;
    }
    

    
    #content {
      width: 300px;
    }
    
    h1 {
      font-size: 24px;
      line-height: 29px;
    }
    
    /* --- Font Smoothing is off --- */

    .hasFontSmoothing-false body {
      background-color: #666;
    }

    
    /* --- Font Smoothing is on --- */
    
    .hasFontSmoothing-true body {
      background-color: #5FA316;
    }
    
    /* Generated by Font Squirrel (http://www.fontsquirrel.com) on April 28, 2010 11:10:14 AM America/New_York */

    @font-face {
      font-family: 'Arnold2.1Regular';
      src: url('ARNORG__-webfont.eot');
      src: local('â˜º'), url('ARNORG__-webfont.woff') format('woff'), url('ARNORG__-webfont.ttf') format('truetype'), url('ARNORG__-webfont.svg#webfont') format('svg');
      font-weight: normal;
      font-style: normal;
    }
    
    .hasFontSmoothing-true h1 {
      font-family: 'Arnold2.1Regular', sans-serif;
    }
        
    </style>
  
  </head>

  <body>

    <div id="content">
    
    <h1>This text could be written in Arnold @font-face if your browser had font-smooting</h1>

    <p>
       This text will render with system font every time. This text will render with system font every time. This text will render with system font every time. This text will render with system font every time.
    </p>

    </div><!-- /content -->

  </body>

</html>